---
source: src/middle/transform/mem2reg.rs
expression: "format!(\"BEFORE:\\n{}\\n\\nAFTER:\\n{}\", llvm_before, llvm_after)"
---
BEFORE:
define i32 @main() {
%entry:
%alloca_2 = alloca i32
%alloca_5 = alloca i32
store i32 0, ptr %alloca_5
br label %cond0

%cond0:
%load_36 = load i32, ptr %alloca_5
%icmp_37 = icmp slt i32 %load_36, 10
br i1 %icmp_37, label %body1, label %final2

%body1:
%load_11 = load i32, ptr %alloca_5
%Add_12 = add i32, %load_11, 2
store i32 %Add_12, ptr %alloca_5
br label %cond3

%final2:
%load_39 = load i32, ptr %alloca_5
store i32 %load_39, ptr %alloca_2
br label %exit

%cond3:
%load_19 = load i32, ptr %alloca_5
%icmp_20 = icmp sgt i32 %load_19, 5
br i1 %icmp_20, label %then4, label %alt5

%exit:
%load_3 = load i32, ptr %alloca_2
ret i32 %load_3

%then4:
br label %cond7

%alt5:
br label %final6

%cond7:
%load_30 = load i32, ptr %alloca_5
%icmp_31 = icmp slt i32 %load_30, 8
br i1 %icmp_31, label %body8, label %final9

%final6:
br label %cond0

%body8:
%load_26 = load i32, ptr %alloca_5
%Add_27 = add i32, %load_26, 1
store i32 %Add_27, ptr %alloca_5
br label %cond7

%final9:
br label %final6


}


AFTER:
define i32 @main() {
%entry:
%alloca_2 = alloca i32
%alloca_5 = alloca i32
br label %cond0

%cond0:
%phi_42 = phi i32 [0, %entry], [%phi_43, %final6]
%icmp_37 = icmp slt i32 %phi_42, 10
br i1 %icmp_37, label %body1, label %final2

%body1:
%Add_12 = add i32, %phi_42, 2
br label %cond3

%final2:
br label %exit

%cond3:
%icmp_20 = icmp sgt i32 %Add_12, 5
br i1 %icmp_20, label %then4, label %alt5

%exit:
ret i32 %phi_42

%then4:
br label %cond7

%alt5:
br label %final6

%cond7:
%phi_43 = phi i32 [%Add_12, %then4], [%Add_27, %body8]
%icmp_31 = icmp slt i32 %phi_43, 8
br i1 %icmp_31, label %body8, label %final9

%final6:
br label %cond0

%body8:
%Add_27 = add i32, %phi_43, 1
br label %cond7

%final9:
br label %final6


}
