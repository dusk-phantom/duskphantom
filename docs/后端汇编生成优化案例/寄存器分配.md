## 基于弦图的寄存器分配方案

对寄存器建立冲突图,然后对冲突图进行化简,最后着色
着色用的物理寄存器分为两种
1. (free_iregs_with_tmp,free_fregs_with_tmp)
2. (free_iregs,free_fregs)
`with_tmp`的寄存器组的区别是多了6个临时寄存器:t0-t2,ft0-ft2.
如果使用组合2进行寄存器分配，计算出着色方案colors,以及要spill的寄存器组合之后，这三个临时寄存器会被用来处理被spill的寄存器。
首先我们使用寄存器组合1尝试寄存器分配，如果发现没有要spill的寄存器，也就是完美分配了，则直接采用分配结果
如果发现不能完美分配，则我们采用寄存器组合2省下来的6个临时寄存器处理spill

## 寄存器分配的时候考虑到waw约束

相邻的指令def的寄存器对，我们统计为一条可以加到原始冲突图上的额外边。
比如`li x33,3`,`li x44,4`这两个相邻的指令,我们认为x33和x44是waw的关系，我们记录一条x33-x44的额外边
所有额外边记录到`def_then_def`表格里。
在进行寄存器分配的时候，考虑额外边，如果冲突图能够不破坏可着色性的时候加入额外边,那么我们就把额外边加入
逐个遍历`def_then_def`表格,加入所有可能加入的额外边,从而减少`waw`的情


## 基于贪心的减少 处理 spill 需要的 代价

每次选择一个 最能够 减少 寄存器冲突的spill位置进行spill操作



## 通过寄存器合并减少数据移动指令

对于`mv x33,x34`这样的数据移动指令,如果x33和x34没有冲突,而且x33被分配到同一个物理寄存器上,
那么该指令相当于从一个物理寄存器移动到自身,那么可以把该指令删除掉,不会影响程序运行结果。
类似的可以处理的情况还有:
- `addi x33,x34,0`
- `add x33,x34,zero`
- `div x33,x34,1`
- `xori x33,x34,0`
- `add x33,x34,zero`
- `sub x33,x34,zero`
- `fmv f33,f34`
- `mul x33,x34,1`


## 使用pbqb 对 简化 图进行寄存器分配


## 寄存器分配的时候考虑到寄存器使用热度
